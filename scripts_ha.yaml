# ============================================
# SCRIPTS HOME ASSISTANT - GESTIONNAIRE INVENTAIRE
# ============================================
# √Ä ajouter dans Param√®tres -> Automatisations -> Scripts -> + Cr√©er

# ===== SCRIPT 1 : AJOUTER MANUELLEMENT =====
# Nom: ajouter_produit_congelateur
ajouter_produit_congelateur:
  alias: "Ajouter produit au cong√©lateur"
  icon: mdi:plus-circle
  mode: single
  fields:
    name:
      name: Nom du produit
      description: "Le nom du produit √† ajouter"
      required: true
      example: "Pizza 4 fromages"
      selector:
        text:
    expiry_date:
      name: Date de p√©remption
      description: "Date d'expiration du produit"
      required: true
      selector:
        date:
    quantity:
      name: Quantit√©
      description: "Nombre d'unit√©s"
      default: 1
      selector:
        number:
          min: 1
          max: 20
          mode: box
  sequence:
    - service: inventory_manager.add_product
      data:
        name: "{{ name }}"
        expiry_date: "{{ expiry_date }}"
        location: freezer
        quantity: "{{ quantity | default(1) }}"
    - service: persistent_notification.create
      data:
        title: "‚úÖ Produit ajout√©"
        message: "{{ name }} ajout√© au cong√©lateur (expire le {{ expiry_date }})"

# ===== SCRIPT 2 : SCANNER CODE-BARRES =====
# Ce script envoie une commande au t√©l√©phone pour ouvrir le scanner
scanner_produit_congelateur:
  alias: "Scanner produit pour cong√©lateur"
  icon: mdi:barcode-scan
  mode: single
  fields:
    expiry_date:
      name: Date de p√©remption
      description: "Date d'expiration du produit"
      required: true
      selector:
        date:
  sequence:
    - service: persistent_notification.create
      data:
        title: "üì∏ Scanner pr√™t"
        message: "Ouvrez l'app HA sur votre t√©l√©phone et utilisez le scan NFC/Barcode"

# ===== SCRIPT 3 : SUPPRIMER UN PRODUIT =====
supprimer_produit:
  alias: "Supprimer un produit"
  icon: mdi:delete
  mode: single
  fields:
    product_id:
      name: ID du produit
      description: "L'identifiant du produit (visible dans les attributs du capteur)"
      required: true
      selector:
        text:
  sequence:
    - service: inventory_manager.remove_product
      data:
        product_id: "{{ product_id }}"
    - service: persistent_notification.create
      data:
        title: "üóëÔ∏è Produit supprim√©"
        message: "Le produit a √©t√© retir√© de l'inventaire"

# ===== SCRIPT 4 : LISTER LES PRODUITS =====
lister_congelateur:
  alias: "Afficher contenu cong√©lateur"
  icon: mdi:format-list-bulleted
  mode: single
  sequence:
    - service: inventory_manager.list_products
      data:
        location: freezer
      response_variable: result
    - service: persistent_notification.create
      data:
        title: "üßä Contenu du cong√©lateur"
        message: "{{ result.count }} produit(s) dans le cong√©lateur"
